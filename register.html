<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skinship Beauty Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    body {
      background-color: #f7d4d0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    .register-container {
      max-width: 1000px;
      width: 100%;
      display: flex;
      gap: 30px;
      align-items: center;
      justify-content: center;
      color: #2b2b2b;
      position: relative;
      z-index: 1;
      flex: 1;
    }

    @media (max-width: 768px) {
      .register-container {
        flex-direction: column;
        gap: 20px;
        padding: 10px;
      }
      
      .form-section {
        max-width: 100%;
        width: 100%;
        padding: 15px 20px;
      }
      
      .image-section {
        width: 200px;
        height: 200px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .form-section {
        padding: 15px;
      }
      
      .welcome-text {
        font-size: 1.5rem;
        letter-spacing: 2px;
      }
    }

    .form-section {
      max-width: 450px;
      flex: 1;
      background: #ffe2ec;
      padding: 20px 25px;
      border-radius: 19px;
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      /* No max-height, no overflow, not scrollable */
    }

    .welcome-text {
      font-weight: 800;
      color: #000000cc;
      margin-top: 0;
      font-size: 1.9rem;
      letter-spacing: 4px;
      font-family: 'Poppins', sans-serif;
      margin-bottom: 6px;
      user-select: none;
      display: inline-block;
    }

    .subtext {
      font-size: 0.85rem;
      color: #000000cc;
      margin-bottom: 20px;
      user-select: none;
    }

    label {
      font-weight: 700;
      font-size: 1.05rem;
      display: block;
      margin-bottom: 3px;
      user-select: none;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"],
    input[type="tel"] {
      display: block;
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #b89a96;
      border-radius: 15px;
      font-size: 1rem;
      color: #2b2b2b;
      background-color: rgba(255, 255, 255, 0.85);
      outline-offset: 4px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      user-select: text;
    }

    input[type="email"]::placeholder,
    input[type="password"]::placeholder,
    input[type="text"]::placeholder,
    input[type="tel"]::placeholder {
      color: #af9d99cc;
    }

    input[type="email"]:focus,
    input[type="password"]:focus,
    input[type="text"]:focus,
    input[type="tel"]:focus {
      border-color: #da5c73;
      box-shadow: 0 0 10px #e88ea4cc;
      background-color: #fbe7eb;
    }

    .checkbox-group {
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }

    .checkbox-group input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-right: 10px;
    }

    .checkbox-group label {
      font-size: 1rem;
      color: #2b2b2b;
    }

    .checkbox-group a {
      text-decoration: none;
      color: #da5c73;
    }

    button.register-btn {
      width: 100%;
      padding: 12px 0;
      background-color: #da5c73;
      border: none;
      border-radius: 15px;
      font-weight: 800;
      font-size: 1.1rem;
      letter-spacing: 1.5px;
      color: black;
      cursor: pointer;
      transition: background-color 0.35s ease;
      user-select: none;
    }

    button.register-btn:hover {
      background-color: #e2798d;
    }

    button.register-btn:disabled {
      background-color: #c4a5a8;
      cursor: not-allowed;
    }

    button.back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 13px 26px;
      background-color: #d97595 !important;
      border: none;
      border-radius: 14px;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 1.1px;
      color: #fff !important;
      cursor: pointer;
      transition: background 0.15s, color 0.15s, box-shadow 0.15s;
      user-select: none;
      box-shadow: 0 4px 24px 0 rgba(190, 70, 110, 0.16);
      z-index: 1001;
    }

    button.back-btn:hover, button.back-btn:focus {
      background: #b94b7d;
      color: #fff;
      box-shadow: 0 6px 28px 0 rgba(190,70,110,0.23);
    }
    
    /* Success Panel Styles */
    .success-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }
    
    .success-panel.show {
      display: flex;
    }
    
    .success-content {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 226, 236, 0.95));
      padding: 40px;
      border-radius: 25px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: slideUp 0.4s ease;
    }
    
    .success-title {
      font-size: 2rem;
      font-weight: 800;
      color: #2b2b2b;
      margin-bottom: 15px;
      letter-spacing: 2px;
    }
    
    .success-message {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 25px;
    }
    
    .success-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #d97595, #b94b7d);
      border: none;
      border-radius: 15px;
      color: white;
      font-weight: 800;
      font-size: 1.1rem;
      letter-spacing: 1.5px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      margin-bottom: 15px;
    }
    
    .success-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(217, 117, 149, 0.4);
    }
    
    .countdown-text {
      font-size: 0.9rem;
      color: #666;
      font-weight: 600;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    /* Notification Panel Styles */
    .notification-panel {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #ff6b6b, #ee5a52);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(255, 107, 107, 0.3);
      z-index: 3000;
      max-width: 350px;
      animation: slideInRight 0.3s ease;
    }
    
    .notification-panel.show {
      display: block;
    }
    
    .notification-title {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 5px;
    }
    
    .notification-message {
      font-size: 0.9rem;
      opacity: 0.9;
    }
    
    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    /* Login highlight just as colored link, not button style */
    .highlight-link {
      color: #da5c73;
      font-weight: 400;
      font-size: 1.04rem;
      text-decoration: none;
      margin-left: 7px;
      padding: 0;
      background: none;
      border-radius: 0;
      transition: color 0.15s;
    }
    .highlight-link:hover {
      color: #b04762;
      text-decoration: underline;
      background: none;
    }
    .signup-link { text-align: center; margin-top: 0.3rem; }
    @media (max-width: 900px) {
      .register-container {
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
      }
      .form-section {
        max-width: 98vw;
        padding: 10px;
      }
      .image-section {
        width: 150px !important;
        height: 150px !important;
      }
    }
    @media (max-width: 600px) {
      .form-section {
        max-width: 99vw;
        padding: 5vw 2vw;
      }
      input, .register-btn, .highlight-link {
        font-size: 0.98rem !important;
      }
      .back-btn {
        padding: 8px 16px !important;
        font-size: 0.9rem;
      }
    }
    /* Remove bold from all relevant links/texts */
    .checkbox-group label, .checkbox-group a, .highlight-link {
      font-weight: 400 !important;
    }
    
    /* Password toggle styles */
    .password-input-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .password-toggle-btn {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #6b7280;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: color 0.3s ease;
      z-index: 10;
    }
    
    .password-toggle-btn:hover {
      color: #da5c73;
    }
    
    .password-toggle-btn:focus {
      outline: none;
      color: #da5c73;
    }
    
    .password-input-container input {
      padding-right: 40px;
    }
    
    /* Enhanced responsive styles */
    @media (max-width: 1200px) {
      .register-container {
        gap: 40px;
        max-width: 95vw;
      }
      
      .form-section {
        max-width: 450px;
        padding: 25px;
      }
      
      .image-section {
        width: 280px;
        height: 280px;
      }
    }
    
    @media (max-width: 1024px) {
      .register-container {
        gap: 30px;
        max-width: 100vw;
        padding: 0 20px;
      }
      
      .form-section {
        max-width: 400px;
        padding: 20px;
      }
      
      .image-section {
        width: 250px;
        height: 250px;
      }
    }
    
    @media (max-width: 900px) {
      .register-container {
        flex-direction: column;
        gap: 25px;
        align-items: center;
        padding: 20px;
        justify-content: center;
      }
      
      .form-section {
        max-width: 90vw;
        width: 100%;
        padding: 20px;
        order: 1;
      }
      
      .image-section {
        width: 200px !important;
        height: 200px !important;
        order: 2;
      }
    }
    
    @media (max-width: 768px) {
      body {
        padding: 10px;
        min-height: auto;
        overflow-y: auto;
      }
      
      .register-container {
        gap: 20px;
        padding: 15px;
        min-height: auto;
        flex: none;
      }
      
      .form-section {
        max-width: 95vw;
        width: 100%;
        padding: 18px;
        margin-top: 60px; /* Space for back button */
      }
      
      .image-section {
        width: 180px !important;
        height: 180px !important;
      }
      
      .welcome-text {
        font-size: 1.8rem;
        letter-spacing: 2px;
      }
      
      .subtext {
        font-size: 0.85rem;
      }
    }
    
    @media (max-width: 600px) {
      body {
        padding: 5px;
        min-height: auto;
        overflow-y: auto;
      }
      
      .register-container {
        gap: 15px;
        padding: 10px;
        min-height: auto;
        flex: none;
      }
      
      .form-section {
        max-width: 98vw;
        width: 100%;
        padding: 15px;
        margin-top: 60px; /* Space for back button */
      }
      
      .image-section {
        width: 150px !important;
        height: 150px !important;
      }
      
      .welcome-text {
        font-size: 1.6rem;
        letter-spacing: 1px;
      }
      
      .subtext {
        font-size: 0.8rem;
      }
      
      input, .register-btn, .highlight-link {
        font-size: 0.95rem !important;
      }
      
      .back-btn {
        padding: 8px 16px !important;
        font-size: 0.9rem;
        top: 15px;
        left: 15px;
        z-index: 1000;
      }
      
      /* Stack name fields vertically on small screens */
      .form-section > div:first-child {
        flex-direction: column;
        gap: 10px;
      }
      
      .form-section > div:first-child > div {
        flex: 1 1 100%;
        min-width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      body {
        min-height: auto;
        overflow-y: auto;
      }
      
      .register-container {
        min-height: auto;
        flex: none;
      }
      
      .form-section {
        max-width: 100vw;
        width: 100%;
        padding: 12px;
        margin-top: 60px; /* Space for back button */
      }
      
      .image-section {
        width: 120px !important;
        height: 120px !important;
      }
      
      .welcome-text {
        font-size: 1.4rem;
        letter-spacing: 1px;
      }
      
      .subtext {
        font-size: 0.75rem;
      }
      
      input, .register-btn {
        font-size: 0.9rem !important;
        padding: 10px 12px;
      }
      
      .back-btn {
        padding: 6px 12px !important;
        font-size: 0.85rem;
        top: 10px;
        left: 10px;
        z-index: 1000;
      }
      
      .checkbox-group {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .checkbox-group label {
        font-size: 0.9rem;
      }
    }
    
    @media (max-width: 360px) {
      body {
        min-height: auto;
        overflow-y: auto;
      }
      
      .register-container {
        min-height: auto;
        flex: none;
      }
      
      .form-section {
        padding: 10px;
        margin-top: 60px; /* Space for back button */
      }
      
      .welcome-text {
        font-size: 1.2rem;
      }
      
      input, .register-btn {
        font-size: 0.85rem !important;
        padding: 8px 10px;
      }
      
      .back-btn {
        padding: 5px 10px !important;
        font-size: 0.8rem;
        z-index: 1000;
      }
    }
  </style>
</head>
<body>
  <button onclick="window.location.href='index.html'" class="back-btn" style="position: fixed; top: 18px; left: 18px; z-index: 10; padding: 10px 22px;">Back</button>
  <canvas id="backgroundCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none;"></canvas>
  <main class="register-container">
    <section class="form-section" role="main" aria-label="Register Form Section">
      <h1 class="welcome-text">Create an Account</h1>
      <p class="subtext">Fill in your details to register</p>
      <form id="registerForm">
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 14px;">
          <div style="flex: 1 1 40%; min-width: 120px;">
            <label for="first_name">First Name</label>
            <input id="first_name" name="first_name" type="text" placeholder="First Name" maxlength="20" required />
          </div>
          <div style="flex: 0.6 1 60px; min-width: 60px; align-self: end;">
            <label for="middle_initial">M.I.</label>
            <input id="middle_initial" name="middle_initial" type="text" placeholder="M.I." maxlength="2" style="width: 100%" />
          </div>
          <div style="flex: 1 1 40%; min-width: 120px;">
            <label for="last_name">Last Name</label>
            <input id="last_name" name="last_name" type="text" placeholder="Last Name" maxlength="20" required />
          </div>
        </div>

        <label for="email">Email Address</label>
        <input id="email" name="email" type="email" placeholder="Email Address" required />

        <label for="phone_number">Phone Number</label>
        <input id="phone_number" name="phone_number" type="tel" placeholder="+63 9XX XXX XXXX" required />

        <label for="password">Password</label>
        <div class="password-input-container">
          <input id="password" name="password" type="password" placeholder="Password" required />
          <button type="button" class="password-toggle-btn" onclick="togglePassword('password')">
            <i class="fa-solid fa-eye" id="password-eye"></i>
          </button>
        </div>
        <small>Password must be at least 8 characters, include letters and numbers.</small>

        <label for="confirm_password">Confirm Password</label>
        <div class="password-input-container">
          <input id="confirm_password" name="confirm_password" type="password" placeholder="Confirm Password" required />
          <button type="button" class="password-toggle-btn" onclick="togglePassword('confirm_password')">
            <i class="fa-solid fa-eye" id="confirm_password-eye"></i>
          </button>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="terms" name="terms" required />
          <label for="terms">I agree to the <a href="terms.html">Terms & Conditions</a> and <a href="privacy.html">Privacy Policy</a></label>
        </div>

        <button type="submit" class="register-btn" style="margin-bottom: 24px;">Sign Up</button>
        <div class="signup-link"><span>Already have an account?
          <a href="login.html" class="highlight-link">Log in</a></span></div>
      </form>
    </section>
    <section class="image-section" id="tiltedLogo" aria-label="Skinship Beauty Logo">
      <div class="image-section-inner">
        <img src="123transparent.png" alt="Skinship Beauty Logo" />
      </div>
      <div class="tilted-tooltip" id="logoTooltip">Skinship Beauty</div>
    </section>
  </main>
  
  <!-- Success Panel -->
  <div id="successPanel" class="success-panel">
    <div class="success-content">
      <h2 class="success-title">🎉 SUCCESS!</h2>
      <p class="success-message">Successfully Signed Up!</p>
      <p class="success-message">Please check your email to verify your account.</p>
      <button id="goHomeBtn" class="success-btn">Go to Login</button>
      <p class="countdown-text" id="countdownText">You will be automatically redirected in 3 seconds</p>
    </div>
  </div>
  
  <!-- Notification Panel -->
  <div id="notificationPanel" class="notification-panel">
    <div class="notification-title">⚠️ Invalid Input</div>
    <div class="notification-message" id="notificationMessage"></div>
  </div>
  
  <script>
    // Background animation copied from login.html
    const canvas = document.getElementById('backgroundCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const particles = [];
    const particleCount = 100;
    const colors = ['#da5c73', '#e2798d', '#f7d4d0'];
    class Particle {
      constructor() { this.reset(); }
      reset() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
        this.size = Math.random() * 3 + 1;
        this.opacity = Math.random() * 0.5 + 0.3;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.angle = Math.random() * Math.PI * 2;
        this.speed = Math.random() * 0.02 + 0.01;
      }
      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.angle += this.speed;
        this.vx += Math.sin(this.angle) * 0.001;
        this.vy += Math.cos(this.angle) * 0.001;
        if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
        if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
        this.x = Math.max(0, Math.min(canvas.width, this.x));
        this.y = Math.max(0, Math.min(canvas.height, this.y));
      }
      draw() {
        ctx.globalAlpha = this.opacity;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.globalAlpha = 1;
      }
    }
    for (let i = 0; i < particleCount; i++) { particles.push(new Particle()); }
    // Dot Grid
    let dots = [];
    const config = {
      dotSize: 4,
      gap: 40,
      baseColor: '#da5c73',
      activeColor: 'ffffff',
      proximity: 100,
      speedTrigger: 80,
      shockRadius: 180,
      shockStrength: 2.5,
      maxSpeed: 5000,
      resistance: 800,
      returnDuration: 1200
    };
    let pointer = { x: 0, y: 0, vx: 0, vy: 0, speed: 0, lastX: 0, lastY: 0, lastTime: 0 };
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : { r: 0, g: 0, b: 0 };
    }
    const baseRgb = hexToRgb(config.baseColor);
    const activeRgb = hexToRgb(config.activeColor);
    function buildGrid() {
      dots = [];
      const width = canvas.width;
      const height = canvas.height;
      const cell = config.dotSize + config.gap;
      const cols = Math.floor((width + config.gap) / cell);
      const rows = Math.floor((height + config.gap) / cell);
      const gridW = cell * cols - config.gap;
      const gridH = cell * rows - config.gap;
      const startX = (width - gridW) / 2 + config.dotSize / 2;
      const startY = (height - gridH) / 2 + config.dotSize / 2;
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          dots.push({
            cx: startX + x * cell,
            cy: startY + y * cell,
            xOffset: 0,
            yOffset: 0,
            targetX: 0,
            targetY: 0,
            animating: false
          });
        }
      }
    }
    function animate(dot, targetX, targetY, duration) {
      const startX = dot.xOffset;
      const startY = dot.yOffset;
      const startTime = performance.now();
      function update() {
        const elapsed = performance.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const easeOut = progress === 1 ? 1 : 1 - Math.pow(2, -10 * progress);
        dot.xOffset = startX + (targetX - startX) * easeOut;
        dot.yOffset = startY + (targetY - startY) * easeOut;
        if (progress < 1) {
          requestAnimationFrame(update);
        }
      }
      requestAnimationFrame(update);
    }
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => { p.update(); p.draw(); });
      const proxSq = config.proximity * config.proximity;
      for (const dot of dots) {
        const ox = dot.cx + dot.xOffset;
        const oy = dot.cy + dot.yOffset;
        const dx = dot.cx - pointer.x;
        const dy = dot.cy - pointer.y;
        const dsq = dx * dx + dy * dy;
        let color = config.baseColor;
        if (dsq <= proxSq) {
          const dist = Math.sqrt(dsq);
          const t = 1 - dist / config.proximity;
          const r = Math.round(baseRgb.r + (activeRgb.r - baseRgb.r) * t);
          const g = Math.round(baseRgb.g + (activeRgb.g - baseRgb.g) * t);
          const b = Math.round(baseRgb.b + (activeRgb.b - baseRgb.b) * t);
          color = `rgb(${r},${g},${b})`;
        }
        ctx.beginPath();
        ctx.arc(ox, oy, config.dotSize / 2, 0, Math.PI * 2);
        ctx.fillStyle = color;
        ctx.fill();
      }
      requestAnimationFrame(draw);
    }
    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      buildGrid();
    });
    let lastMoveTime = 0;
    window.addEventListener('mousemove', (e) => {
      const now = performance.now();
      if (now - lastMoveTime < 16) return;
      lastMoveTime = now;
      const dt = pointer.lastTime ? now - pointer.lastTime : 16;
      const dx = e.clientX - pointer.lastX;
      const dy = e.clientY - pointer.lastY;
      pointer.vx = (dx / dt) * 1000;
      pointer.vy = (dy / dt) * 1000;
      pointer.speed = Math.hypot(pointer.vx, pointer.vy);
      if (pointer.speed > config.maxSpeed) {
        const scale = config.maxSpeed / pointer.speed;
        pointer.vx *= scale;
        pointer.vy *= scale;
        pointer.speed = config.maxSpeed;
      }
      pointer.lastTime = now;
      pointer.lastX = e.clientX;
      pointer.lastY = e.clientY;
      pointer.x = e.clientX;
      pointer.y = e.clientY;
      if (pointer.speed > config.speedTrigger) {
        for (const dot of dots) {
          const dist = Math.hypot(dot.cx - pointer.x, dot.cy - pointer.y);
          if (dist < config.proximity && !dot.animating) {
            const pushX = (dot.cx - pointer.x + pointer.vx * 0.003) * 0.3;
            const pushY = (dot.cy - pointer.y + pointer.vy * 0.003) * 0.3;
            animate(dot, pushX, pushY, config.resistance);
            setTimeout(() => { animate(dot, 0, 0, config.returnDuration); }, config.resistance);
          }
        }
      }
    });
    window.addEventListener('click', (e) => {
      const cx = e.clientX;
      const cy = e.clientY;
      for (const dot of dots) {
        const dist = Math.hypot(dot.cx - cx, dot.cy - cy);
        if (dist < config.shockRadius && !dot.animating) {
          const falloff = Math.max(0, 1 - dist / config.shockRadius);
          const pushX = (dot.cx - cx) * 2.5 * falloff;
          const pushY = (dot.cy - cy) * 2.5 * falloff;
          animate(dot, pushX, pushY, config.resistance);
          setTimeout(() => { animate(dot, 0, 0, config.returnDuration); }, config.resistance);
        }
      }
    });
    buildGrid();
    draw();
  </script>
  <script>
    // Tilted logo effect from login.html
    const tiltedLogo = document.getElementById('tiltedLogo');
    const logoInner = tiltedLogo.querySelector('.image-section-inner');
    const logoTooltip = document.getElementById('logoTooltip');
    let logoRotateX = 0;
    let logoRotateY = 0;
    let logoScale = 0;
    let tooltipOpacity = 0;
    let tooltipRotate = 0;
    let lastLogoY = 0;
    const rotateAmplitude = 12;
    const scaleOnHover = 1;
    function animateLogo() {
      logoInner.style.transform = `rotateX(${logoRotateX}deg) rotateY(${logoRotateY}deg) scale(${logoScale})`;
      logoTooltip.style.opacity = tooltipOpacity;
      logoTooltip.style.transform = `translate(-50%, -50%) rotate(${tooltipRotate}deg)`;
      logoRotateX *= 0.85;
      logoRotateY *= 0.85;
      logoScale += (1 - logoScale) * 0.15;
      tooltipOpacity *= 0.9;
      tooltipRotate *= 0.85;
      requestAnimationFrame(animateLogo);
    }
    animateLogo();
    tiltedLogo.addEventListener('mousemove', (e) => {
      const rect = tiltedLogo.getBoundingClientRect();
      const offsetX = e.clientX - rect.left - rect.width / 2;
      const offsetY = e.clientY - rect.top - rect.height / 2;
      const rotationX = (offsetY / (rect.height / 2)) * -rotateAmplitude;
      const rotationY = (offsetX / (rect.width / 2)) * rotateAmplitude;
      logoRotateX = rotationX;
      logoRotateY = rotationY;
      logoTooltip.style.left = `${e.clientX - rect.left}px`;
      logoTooltip.style.top = `${e.clientY - rect.top}px`;
      const velocityY = offsetY - lastLogoY;
      tooltipRotate = -velocityY * 0.3;
      lastLogoY = offsetY;
    });
    tiltedLogo.addEventListener('mouseenter', () => {
      logoScale = scaleOnHover;
      tooltipOpacity = 1;
      logoTooltip.classList.add('show');
    });
    tiltedLogo.addEventListener('mouseleave', () => {
      logoRotateX = 0;
      logoRotateY = 0;
      logoScale = 1;
      tooltipOpacity = 0;
      tooltipRotate = 0;
      logoTooltip.classList.remove('show');
    });
  </script>
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyD2Yh7L4Wl9XRlOgxnzZyo8xxds6a02UJY",
      authDomain: "skinship-1ff4b.firebaseapp.com",
      projectId: "skinship-1ff4b",
      storageBucket: "skinship-1ff4b.firebasestorage.app",
      messagingSenderId: "963752770497",
      appId: "1:963752770497:web:8911cc6a375acdbdcc8d40"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Show/hide password toggle
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const eyeIcon = document.getElementById(fieldId + '-eye');
      if (!field || !eyeIcon) return;
      if (field.type === 'password') {
        field.type = 'text';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      } else {
        field.type = 'password';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      }
    }
    // Attach toggle handlers in JS (not inline)
    document.querySelectorAll('.password-toggle-btn').forEach(btn => {
      btn.addEventListener('click', e => {
        e.preventDefault();
        const forInput = btn.previousElementSibling.id;
        togglePassword(forInput);
      });
    });

    // Success panel functions (remains the same, but be sure IDs are present in DOM)
    const successPanel = document.getElementById('successPanel');
    const goHomeBtn = document.getElementById('goHomeBtn');
    const countdownText = document.getElementById('countdownText');
    let countdownTimer = null;
    function startCountdown() {
      let sec = 3;
      countdownText.textContent = `You will be automatically redirected in ${sec} seconds`;
      countdownTimer = setInterval(() => {
        sec--;
        countdownText.textContent = `You will be automatically redirected in ${sec} seconds`;
        if (sec <= 0) {
          clearInterval(countdownTimer);
          window.location.href = 'login.html';
        }
      }, 1000);
    }
    goHomeBtn.onclick = () => {
      successPanel.classList.remove('show');
      window.location.href = 'login.html';
    };

    function showSuccessPanel() {
      successPanel.classList.add('show');
      startCountdown();
    }

    // Registration form handling
    const registerForm = document.getElementById('registerForm');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm_password');
    const submitBtn = document.querySelector('button[type="submit"].register-btn');

    // Validation utilities
    const notificationPanel = document.getElementById('notificationPanel');
    const notificationMessage = document.getElementById('notificationMessage');
    let notificationTimer = null;
    function showNotification(msg) {
      notificationMessage.textContent = msg;
      notificationPanel.classList.add('show');
      if (notificationTimer) clearTimeout(notificationTimer);
      notificationTimer = setTimeout(() => notificationPanel.classList.remove('show'), 5000);
    }
    function hideNotification() { notificationPanel.classList.remove('show'); if (notificationTimer) clearTimeout(notificationTimer); }
    function isValidEmail(email) {
      return /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email);
    }
    function isValidPhilippinePhone(phone) {
      const clean = phone.replace(/\D/g, '');
      if (clean.startsWith('63')) return clean.length === 12 && clean.charAt(2) === '9';
      if (clean.startsWith('09')) return clean.length === 11;
      return false;
    }

    registerForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      hideNotification();

      const data = Object.fromEntries(new FormData(registerForm));
      if (!data.first_name || !data.last_name || !data.email || !data.password || !data.confirm_password) {
        showNotification('Please fill in all required fields.');
        return;
      }
      if (!isValidEmail(data.email)) {
        showNotification('Please enter a valid email address.');
        return;
      }
      if (!isValidPhilippinePhone(data.phone_number)) {
        showNotification('Please enter a valid Philippine phone number (e.g., +63 9XX XXX XXXX or 09XX XXX XXXX).');
        return;
      }
      if (data.password !== data.confirm_password) {
        showNotification('Passwords do not match.');
        return;
      }
      if (data.password.length < 8 || !/\d/.test(data.password)) {
        showNotification('Password must be at least 8 characters and include at least 1 number.');
        return;
      }
      if (!data.terms) {
        showNotification('Please agree to the Terms & Conditions and Privacy Policy.');
        return;
      }
      submitBtn.disabled = true;
      submitBtn.textContent = "CREATING ACCOUNT...";
      try {
        // Firebase registration & Firestore user storing
        const userCred = await createUserWithEmailAndPassword(auth, data.email, data.password);
        await sendEmailVerification(userCred.user);
        await setDoc(doc(db, "users", userCred.user.uid), {
          uid: userCred.user.uid,
          firstName: data.first_name,
          middleInitial: data.middle_initial || '',
          lastName: data.last_name,
          email: data.email,
          phoneNumber: data.phone_number,
          role: 'customer',
          createdAt: new Date().toISOString()
        });
        showSuccessPanel();
        setTimeout(() => window.location.href = 'login.html', 3000);
      } catch (err) {
        let errorMessage = "Registration failed: ";
        switch (err.code) {
          case 'auth/email-already-in-use': errorMessage += "An account with this email already exists."; break;
          case 'auth/invalid-email': errorMessage += "Invalid email address."; break;
          case 'auth/weak-password': errorMessage += "Password is too weak."; break;
          case 'auth/operation-not-allowed': errorMessage += "Email/password accounts are not enabled."; break;
          default: errorMessage += (err.message || err.code || 'Unknown error.');
        }
        showNotification(errorMessage);
        submitBtn.disabled = false;
        submitBtn.textContent = "SIGN UP";
      }
    });
  </script>
  
</body>
</html>
